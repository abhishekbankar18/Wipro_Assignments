package com.example.hotel_booking_system_rest_api.controller;

import java.util.List;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;
import com.example.hotel_booking_system_rest_api.model.Room;
import com.example.hotel_booking_system_rest_api.service.RoomService;

@RestController
@RequestMapping("/api")
public class RoomController {

    private final RoomService roomService;
    public RoomController(RoomService roomService) {
        this.roomService = roomService;
    }

    // GET /api/hotels/{hotelId}/rooms
    @GetMapping("/hotels/{hotelId}/rooms")
    public List<Room> getRoomsForHotel(@PathVariable Long hotelId) {
        return roomService.getAllRoomsForHotel(hotelId);
    }

    // GET /api/rooms/{id}
    @GetMapping("/rooms/{id}")
    public ResponseEntity<Room> getRoomById(@PathVariable Long id) {
        Room r = roomService.getRoomById(id);
        return r == null ? ResponseEntity.notFound().build() : ResponseEntity.ok(r);
    }

    // POST /api/rooms
    @PostMapping("/rooms")
    public ResponseEntity<Room> createRoom(@RequestBody Room room) {
        return ResponseEntity.ok(roomService.createRoom(room));
    }

    // PUT /api/rooms/{id}
    @PutMapping("/rooms/{id}")
    public ResponseEntity<Room> updateRoom(@PathVariable Long id, @RequestBody Room room) {
        Room updated = roomService.updateRoom(id, room);
        return updated == null ? ResponseEntity.notFound().build() : ResponseEntity.ok(updated);
    }

    // DELETE /api/rooms/{id}
    @DeleteMapping("/rooms/{id}")
    public ResponseEntity<Void> deleteRoom(@PathVariable Long id) {
        roomService.deleteRoom(id);
        return ResponseEntity.noContent().build();
    }
}
